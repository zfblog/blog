<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="initial-scale=1, width=device-width, maximum-scale=1, user-scalable=no">
		<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/yys.css"/>
		<link rel="stylesheet" href="__PUBLIC__/css/yw_forget_password.css" />
		<script type="text/javascript" src="__PUBLIC__/js/yw_login.js"></script>
		<script type="text/javascript" src="__PUBLIC__/js/jquery-2.2.4.min.js"></script>
	</head>
	<body>
		<div id="black">
			<a class="black_a" href="__CONTROLLER__/login">
				<img src="__PUBLIC__/img/yw_login_black_02.png"/>
			</a>
		</div>
		<div id="massegin_div" >
			<span id="massegin">
			</span>
		</div>
		<div id="content_div">
			<div class="content_div1">
				<div class="content_div1_text">输入手机号</div>
				<div class="content_div1_phone">
					<input type="number" name="phone" id="phone" value="" />
				</div>
			</div>
			<div class="content_div2">
				<div class="content_div2_text">输入验证码</div>
				<div class="content_div2_yzm">
					<input type="number" name="yzm" id="yzm" value="" />
				</div>
				<div class="content_div2_button">获取验证码</div>
			</div>
			<div class="content_div3">
				<div class="content_div3_text">输入新密码</div>
				<div class="content_div3_pass1">
					<input type="password" name="pass1" id="pass1" value="" />
				</div>
			</div>
			<div class="content_div4">
				<div class="content_div4_text">确认新密码</div>
				<div class="content_div4_pass1">
					<input type="password" name="pass2" id="pass2" value="" />
				</div>
			</div>
		</div>
		<div id="content_button">确定</div>
		<div id="display1">
			<a href="__CONTROLLER__/login">
				<div class="display1_div">
					<div class="display1_text">密码修改成功</div>
					     <div class="display1_img"></div>
			  	</div>
			</a>
	    </div>
		<div id="display2">
			<a href="__CONTROLLER__/forget_password">
				<div class="display2_div">
					<div class="display2_text">密码修改失败</div>
						<div class="display2_img"></div>
				</div>
			</a>
		</div>
		<if condition="($code eq 1000)"><script type="text/javascript">document.getElementById("display1").style.display="block";</script>
			<elseif condition="($code eq 1005)"/>
   			<else /><script type="text/javascript">document.getElementById("display2").style.display="block";</script>
   		</if>
	</body>
	<script type="text/javascript">
		$(function(){
			
			$('#phone').blur(function(){
				vailPhone($('#phone').val());
			})	
			
			$('.content_div2_button').on('click',function(){
				num=Math.floor(Math.random()*10).toString()+Math.floor(Math.random()*10).toString()+Math.floor(Math.random()*10).toString()+Math.floor(Math.random()*10).toString();
				$("#yzm").val(num);
			})
			$('#pass1').blur(function(){
				passvalue1($('#pass1').val());
			})	
			$('#pass2').blur(function(){
				pass1=$('#pass1').val();
				pass2=$('#pass2').val();
				passvalue2(pass1,pass2);
			})	
			$("#content_button").click(function(){
				massegin=$('#massegin').html();
				phone=$('#phone').val();
				pass2=$('#pass2').val();
				if(massegin==""){
					window.location.href="__CONTROLLER__/forget_password?YW_User_Phone="+phone+"&YW_User_Password="+pass2;
				}else{
					
				}
			})
		})


		function vailPhone(item){
			console.log(item);
			var myreg = /^(((13[0-9]{1})|(14[0-9]{1})|(17[0]{1})|(15[0-3]{1})|(15[5-9]{1})|(18[0-9]{1}))+\d{8})$/;
			if (!myreg.test(item)) {
				$('#massegin').html("请输入正确的手机号码");	
			}else{
				$('#massegin').html("");	
			}
		}
		function passvalue1(str){   //用户名
			  if(!/^[a-zA-Z0-9_]{3,16}$/.test(str)){
				 $('#massegin').html("请输入3-16位由字母或数字组成的密码");	
			  }else{
			     $('#massegin').html("");		  
			 }
	    }
	
		function passvalue2(pass1,pass2){   //用户名
			  if(pass1!=pass2){
				 $('#massegin').html("请确认输入的两次密码是否相同");	
			  }else{
			     $('#massegin').html("");		  
			 }
	    }

		
	</script>
	
</html>
